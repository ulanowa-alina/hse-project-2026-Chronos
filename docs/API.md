**Актуальная версия: 1.1
### Содержание: 
1. [[#История изменений]]
2. [[#Входные параметры]]
	3.1. [[#Endpoints]] 
	3.2. [[#Модели]]
	3.3. [[#Ограничения и проверки параметров]]
3. [[#Выходные параметры]]
	4.1. [[#Положительный ответ]]
	4.2. [[#Ответ с ошибками]]
4. [[#Примеры запросов и ответов]]


### История изменений

**Версия** - номер версии
**Дата** - дата в формате ДД.ММ.ГГГГ
**Описание изменений** - текстовое описание изменений документа

| Версия | Дата       | Описание                                                                      |
| ------ | ---------- | ----------------------------------------------------------------------------- |
| 1.0    | 07.02.2026 | Создана первая версия документа                                               |
| 1.1    | 15.02.2026 | Обновлены Endpoints(обновлены примеры запросов и ответов). Удалена модель Tag |



### Входные параметры 
##### Endpoints

| Метод  | Endpoint               | Описание                           | Request body                      | Response                           |
| ------ | ---------------------- | ---------------------------------- | --------------------------------- | ---------------------------------- |
| POST   | /auth/v1/login         | Авторизация пользователя           | LoginRequest                      | LoginResponse                      |
| GET    | /boards/v1/get         | Получить список досок пользователя | —                                 | {"boards": Board[]}                |
| POST   | /boards/v1/create      | Создать новую доску                | {"title": "..."}                  | {"board_id": "id", "title": "..."} |
| GET    | /board/v1/get          | Получить доску по id               | —                                 | {"board": {...}}                   |
| DELETE | /board/v1/delete       | Удалить доску                      | {"board_id": "id"}                | 204 No Content                     |
| GET    | /board/v1/tasks        | Получить задачи доски              | —                                 | {"tasks": Task[]}                  |
| POST   | /board/v1/tasks/create | Создать задачу                     | {"board_id": "id", "text": "..."} | {"task_id": "id", ...}             |
| PATCH  | /tasks/v1/update       | Обновить задачу                    | {"task_id": "id", "text": "..."}  | {"task_id": "id", ...}             |
| DELETE | /tasks/v1/delete       | Удалить задачу                     | {"task_id": "id"}                 | 204 No Content                     |
##### Модели
1. User (Пользователь)
User object

| №   | Параметр | Тип данных        | Обязательность | Описание                              | Пример               |
| --- | -------- | ----------------- | -------------- | ------------------------------------- | -------------------- |
| 1   | id       | integer           | да             | Уникальный идентификатор пользователя | 1                    |
| 2   | email    | string            | да             | Email для авторизации                 | user@mail.ru         |
| 3   | name     | string            | да             | Имя пользователя                      | John                 |
| 4   | date     | string (ISO 8601) | да             | Дата регистрации                      | 2026-01-10T12:00:00Z |

2. Board (Доска)
Board object


| №   | Параметр    | Тип данных        | Обязательность | Описание            | Пример               |
| --- | ----------- | ----------------- | -------------- | ------------------- | -------------------- |
| 1   | id          | integer           | да             | Идентификатор доски | 10                   |
| 2   | ownerId     | integer           | да             | id владельца доски  | 1                    |
| 3   | title       | string            | да             | Название доски      | Project              |
| 4   | description | string            | нет            | Описание доски      | Мой первый проект    |
| 5   | isPrivate   | bool              | да             | Приватная ли доска  | true                 |
| 6   | date        | string (ISO 8601) | да             | Дата создания доски | 2026-01-10T12:00:00Z |

3. Task (Карточка задачи)
Task object

| №   | Параметр      | Тип данных        | Обязательность | Описание                      | Пример               |
| --- | ------------- | ----------------- | -------------- | ----------------------------- | -------------------- |
| 1   | id            | integer           | да             | Идентификатор карточки задачи | 101                  |
| 2   | boardId       | integer           | да             | id доски                      | 10                   |
| 3   | title         | string            | да             | Название карточки задачи      | Оформить README      |
| 4   | description   | string            | нет            | Описание задчи                | Финальная версия     |
| 5   | status        | string            | да             | Статус задачи                 | In progress          |
| 6   | priorityColor | string            | да             | Цвет приорита                 | red                  |
| 8   | date          | string (ISO 8601) | да             | Дата создания карточки        | 2026-01-10T12:00:00Z |
| 9   | deadline      | string (ISO 8601) | нет            | Дедлайн                       | 2026-01-10T12:00:00Z |
| 7   | tags          | array of objects  | нет            | Массив меток                  | см. Tag              |


4. Post (Авторизация)
LoginRequest

| №   | Параметр | Тип данных | Обязательность | Описание            |
| --- | -------- | ---------- | -------------- | ------------------- |
| 1   | email    | string     | да             | Email пользователя  |
| 2   | password | string     | да             | Пароль пользователя |
LoginResponse

| №   | Параметр | Тип данных | Обязательность | Описание            | Пример    |
| --- | -------- | ---------- | -------------- | ------------------- | --------- |
| 1   | token    | string     | да             | JWT токен           | jwt_token |

##### Ограничения и проверки параметров

1. User

| Параметр | Ограничения                |
| -------- | -------------------------- |
| email    | Валидный email, уникальный |
| name     | 1–50 символов              |
| password | Минимум 8 символов         |
2. Board

| Параметр    | Ограничения                  |
| ----------- | ---------------------------- |
| title       | 1–100 символов               |
| description | До 1000 символов             |
| isPrivate   | true / false                 |
| ownerId     | Существующий id пользователя |

3. Task

| Параметр      | Ограничения                 |
| ------------- | --------------------------- |
| title         | 1–100 символов              |
| description   | До 1000 символов            |
| boardId       | Существующий id доски       |
| priorityColor | Строка, допустимый CSS-цвет |

4. Tag

| Параметр | Ограничения                 |
| -------- | --------------------------- |
| name     | 1–30 символов               |
| color    | Строка, допустимый CSS-цвет |


### Выходные параметры 

##### Положительный ответ

Общие правила формирования ответа:

- Формат ответа: `application/json`
- Кодировка: `UTF-8`
- Все даты возвращаются в формате `ISO 8601`
- Сервер возвращает только актуальные данные, сохранённые в базе
- При успешном удалении объекта возвращается `HTTP 204 No Content` без тела ответа

Форматы положительных ответов:

 1. Формат успешного ответа с объектом

Используется для Endpoint:
- создания
- получения
- обновления ресурсов
```json
{
  "data": <Object>
}

```

>`<Object>` — одна из моделей: User, Board, Task, Tag

2. Формат успешного ответа со списком объектов

Используется для Endpoint получения списков.
```json
{
  "data": [
    <Object>,
    <Object>
  ]
}
```

3. Формат успешного ответа без тела

Используется для операций удаления.

```
HTTP 204 No Content
```

> Тело ответа отсутствует.

4. Авторизация

При успешной авторизации возвращается:
```json
{
  "data": {
    "token": "<JWT-токен>",
    "user": <User>
  }
}
```

 
 Связь с входными параметрами:

| Endpoint                | Тип успешного ответа     |
| ----------------------- | ------------------------ |
| POST /auth/login        | `data.token + data.user` |
| GET /boards             | `data: Board[]`          |
| POST /boards            | `data: Board`            |
| GET /boards/{id}        | `data: Board`            |
| GET /boards/{id}/tasks  | `data: Task[]`           |
| POST /boards/{id}/tasks | `data: Task`             |
| PATCH /tasks/{id}       | `data: Task`             |

##### Ответ с ошибками 

Общий формат ответа с ответа с ошибкой:
```json
{
  "error": {
    "code": "ERROR_CODE",
    "message": "Описание ошибки",
    "details": {
      "field": "описание"
    }
  }
}
```
>Поле `details` является необязательным и используется для ошибок валидации

Коды ошибок:

| Код | Описание                       | Виды                                                        |
| --- | ------------------------------ | ----------------------------------------------------------- |
| 400 | Ошибки входных данных          | VALIDATION_ERROR NVALID_FORMAT       MISSING_FIELD          |
| 401 | Ошибки авторизации             | UNAUTHORIZED       INVALID_TOKEN                            |
| 403 | Ошибки доступа                 | FORBIDDEN RESOURCE_NOT_OWNED                                |
| 404 | Запрашиваемый ресурс не найден | USER_NOT_FOUND BOARD_NOT_FOUND TASK_NOT_FOUND TAG_NOT_FOUND |
| 405 | Конфликты данных               | DUPLICATE_RESOURCE EMAIL_ALREADY_EXISTS TAG_ALREADY_EXISTS  |
| 500 | Внутренняя ошибка сервера      | INTERNAL_ERROR DATABASE_ERROR                               |

Значения ошибок и их коды:

 400 — Ошибки входных данных

|Код ошибки|Описание|
|---|---|
|VALIDATION_ERROR|Ошибка валидации параметров|
|INVALID_FORMAT|Неверный формат данных|
|MISSING_FIELD|Отсутствует обязательное поле|


401 — Ошибки авторизации

|Код ошибки|Описание|
|---|---|
|UNAUTHORIZED|Пользователь не авторизован|
|INVALID_TOKEN|Некорректный или истёкший токен|
 
 403 — Ошибки доступа

|Код ошибки|Описание|
|---|---|
|FORBIDDEN|Нет прав доступа к ресурсу|
|RESOURCE_NOT_OWNED|Ресурс принадлежит другому пользователю|

404 — Ресурс не найден

|Код ошибки|Описание|
|---|---|
|USER_NOT_FOUND|Пользователь не найден|
|BOARD_NOT_FOUND|Доска не найдена|
|TASK_NOT_FOUND|Задача не найдена|
|TAG_NOT_FOUND|Метка не найдена|

405 — Конфликты данных

|Код ошибки|Описание|
|---|---|
|DUPLICATE_RESOURCE|Ресурс уже существует|
|EMAIL_ALREADY_EXISTS|Пользователь с таким email уже существует|
|TAG_ALREADY_EXISTS|Метка с таким именем уже существует|

 500 — Серверные ошибки

|Код ошибки|Описание|
|---|---|
|INTERNAL_ERROR|Внутренняя ошибка сервера|
|DATABASE_ERROR|Ошибка работы с базой данных|

### Примеры запросов и ответов

1. Авторизация пользователя
Запрос:
```bash
POST /api/auth/v1/login
Content-Type: application/json
{ "email": "user@mail.ru", 
 "password": "password123" 
}
```
Ответ:
```json
{
  "data": {
    "token": "jwt_token",
    "user": {
      "id": 1,
      "email": "user@mail.ru",
      "name": "John",
      "date": "2026-01-10T12:00:00Z"
    }
  }
}
```

2. Получение списка досок пользователя
Запрос
```bash
GET /api/boards/v1/get
Authorization: Bearer <JWT>
```
Ответ:
```json
{
  "data": [
    {
      "id": 10,
      "ownerId": 1,
      "title": "Project",
      "description": "Мой первый проект",
      "isPrivate": true,
      "date": "2026-01-10T12:00:00Z"
    }
  ]
}
```

3. Создание новой доски
Запрос:
```bash
POST /api/boards/v1/create
Authorization: Bearer <JWT>
Content-Type: application/json

{
  "title": "Учёба",
  "description": "Весенний семестр",
  "isPrivate": false
}
```
Ответ:
```json
{
  "data": {
    "id": 11,
    "ownerId": 1,
    "title": "Учёба",
    "description": "Весенний семестр",
    "isPrivate": false,
    "date": "2026-02-07T10:15:00Z"
  }
}
```

4. Создание задачи в доске
Запрос:
```bash
POST /api/board/v1/tasks/create
Authorization: Bearer <JWT>
Content-Type: application/json

{
  "board_id": 10,
  "title": "Оформить README",
  "status": "todo",
  "priorityColor": "red"
}
```
Ответ:
```json
{
  "data": {
    "id": 101,
    "boardId": 10,
    "title": "Оформить README",
    "status": "todo",
    "priorityColor": "red",
    "date": "2026-02-07T10:30:00Z"
  }
}
```

5. Ошибка валидации входных данных

Запрос:
```bash
POST /api/boards/v1/create
Authorization: Bearer <JWT>
Content-Type: application/json

{
  "title": ""
}
```
Ответ:
HTTP-уровень:
```
HTTP/1.1 400 Bad Request
Content-Type: application/json
```
Тело ответа(JSON):
```json
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "...",
    "details": {
      "title": "Минимальная длина — 1 символ"
    }
  }
}
```